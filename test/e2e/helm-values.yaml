# Used when installing the operator in Kind cluster
#
# For CI pipeline, override image with:
#   --set image.repository=internal-secrets-operator --set image.tag=test

image:
  repository: ghcr.io/guided-traffic/internal-secrets-operator
  pullPolicy: Never  # Image is loaded directly into Kind
  tag: "latest"

controller:
  leaderElection: false  # Single replica, no need for leader election

# Health probes optimized for E2E testing
livenessProbe:
  httpGet:
    path: /healthz
    port: health
  initialDelaySeconds: 10
  periodSeconds: 10
  timeoutSeconds: 5
  failureThreshold: 3

readinessProbe:
  httpGet:
    path: /readyz
    port: health
  initialDelaySeconds: 5
  periodSeconds: 5
  timeoutSeconds: 3
  failureThreshold: 3

# Reduced CPU limit for testing
resources:
  limits:
    cpu: 200m

# Rotation configuration for E2E tests
config:
  rotation:
    # Short minInterval for testing rotation feature
    minInterval: 5s
    createEvents: true
